var app=function(){"use strict";function t(){}const e=t=>t;function n(t,e){for(const n in e)t[n]=e[n];return t}function s(t){return t()}function o(){return Object.create(null)}function r(t){t.forEach(s)}function i(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(t,e,s,o){return t[1]&&o?n(s.ctx.slice(),t[1](o(e))):s.ctx}function u(t,e,n,s,o,r,i){const c=function(t,e,n,s){if(t[2]&&s){const o=t[2](s(n));if(void 0===e.dirty)return o;if("object"==typeof o){const t=[],n=Math.max(e.dirty.length,o.length);for(let s=0;s<n;s+=1)t[s]=e.dirty[s]|o[s];return t}return e.dirty|o}return e.dirty}(e,s,o,r);if(c){const o=a(e,n,s,i);t.p(o,c)}}const l="undefined"!=typeof window;let h=l?()=>window.performance.now():()=>Date.now(),p=l?t=>requestAnimationFrame(t):t;const d=new Set;function f(t){d.forEach((e=>{e.c(t)||(d.delete(e),e.f())})),0!==d.size&&p(f)}function m(t){let e;return 0===d.size&&p(f),{promise:new Promise((n=>{d.add(e={c:t,f:n})})),abort(){d.delete(e)}}}function g(t,e){t.appendChild(e)}function y(t,e,n){t.insertBefore(e,n||null)}function b(t){t.parentNode.removeChild(t)}function w(t){return document.createElement(t)}function k(t){return document.createTextNode(t)}function v(){return k(" ")}function C(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function _(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function E(t,e,n){e in t?t[e]=n:_(t,e,n)}function x(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function A(t,e){t.value=null==e?"":e}function T(t,e,n,s){t.style.setProperty(e,n,s?"important":"")}let S;function $(){if(void 0===S){S=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(t){S=!0}}return S}const O=new Set;let B,P=0;function N(t,e,n,s,o,r,i,c=0){const a=16.666/s;let u="{\n";for(let t=0;t<=1;t+=a){const s=e+(n-e)*r(t);u+=100*t+`%{${i(s,1-s)}}\n`}const l=u+`100% {${i(n,1-n)}}\n}`,h=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(l)}_${c}`,p=t.ownerDocument;O.add(p);const d=p.__svelte_stylesheet||(p.__svelte_stylesheet=p.head.appendChild(w("style")).sheet),f=p.__svelte_rules||(p.__svelte_rules={});f[h]||(f[h]=!0,d.insertRule(`@keyframes ${h} ${l}`,d.cssRules.length));const m=t.style.animation||"";return t.style.animation=`${m?`${m}, `:""}${h} ${s}ms linear ${o}ms 1 both`,P+=1,h}function F(t,e){const n=(t.style.animation||"").split(", "),s=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),o=n.length-s.length;o&&(t.style.animation=s.join(", "),P-=o,P||p((()=>{P||(O.forEach((t=>{const e=t.__svelte_stylesheet;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.__svelte_rules={}})),O.clear())})))}function j(t){B=t}function R(t){(function(){if(!B)throw new Error("Function called outside component initialization");return B})().$$.on_mount.push(t)}const M=[],q=[],L=[],D=[],I=Promise.resolve();let H=!1;function V(){H||(H=!0,I.then(W))}function z(){return V(),I}function K(t){L.push(t)}let U=!1;const Y=new Set;function W(){if(!U){U=!0;do{for(let t=0;t<M.length;t+=1){const e=M[t];j(e),X(e.$$)}for(j(null),M.length=0;q.length;)q.pop()();for(let t=0;t<L.length;t+=1){const e=L[t];Y.has(e)||(Y.add(e),e())}L.length=0}while(M.length);for(;D.length;)D.pop()();H=!1,U=!1,Y.clear()}}function X(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(K)}}let J;function G(){return J||(J=Promise.resolve(),J.then((()=>{J=null}))),J}function Z(t,e,n){t.dispatchEvent(function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(`${e?"intro":"outro"}${n}`))}const Q=new Set;let tt;function et(){tt={r:0,c:[],p:tt}}function nt(){tt.r||r(tt.c),tt=tt.p}function st(t,e){t&&t.i&&(Q.delete(t),t.i(e))}function ot(t,e,n,s){if(t&&t.o){if(Q.has(t))return;Q.add(t),tt.c.push((()=>{Q.delete(t),s&&(n&&t.d(1),s())})),t.o(e)}}const rt={duration:0};function it(t,e){ot(t,1,1,(()=>{e.delete(t.key)}))}function ct(t){t&&t.c()}function at(t,e,n){const{fragment:o,on_mount:c,on_destroy:a,after_update:u}=t.$$;o&&o.m(e,n),K((()=>{const e=c.map(s).filter(i);a?a.push(...e):r(e),t.$$.on_mount=[]})),u.forEach(K)}function ut(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function lt(e,n,s,i,c,a,u=[-1]){const l=B;j(e);const h=e.$$={fragment:null,ctx:null,props:a,update:t,not_equal:c,bound:o(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:[]),callbacks:o(),dirty:u,skip_bound:!1};let p=!1;if(h.ctx=s?s(e,n.props||{},((t,n,...s)=>{const o=s.length?s[0]:n;return h.ctx&&c(h.ctx[t],h.ctx[t]=o)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](o),p&&function(t,e){-1===t.$$.dirty[0]&&(M.push(t),V(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(e,t)),n})):[],h.update(),p=!0,r(h.before_update),h.fragment=!!i&&i(h.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);h.fragment&&h.fragment.l(t),t.forEach(b)}else h.fragment&&h.fragment.c();n.intro&&st(e.$$.fragment),at(e,n.target,n.anchor),W()}j(l)}class ht{$destroy(){ut(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function pt(e){let n,s,o,c,a,u,l,h,p,d,f,m,g,k,E,x,S,$;return{c(){n=w("video"),o=v(),c=w("button"),c.textContent="Play",a=v(),u=w("button"),u.textContent="Stop",l=v(),h=w("input"),p=v(),d=w("button"),d.textContent="Setta url",f=v(),m=w("button"),m.textContent="Fullscreen",g=v(),k=w("br"),E=v(),x=w("input"),_(n,"preload","metadata"),n.src!==(s="http://www.danmachi.info/DDL/ANIME/ReZeroKaraHajimeruIsekaiSeikatsu2Part2/ReZeroKaraHajimeruIsekaiSeikatsu2Part2_Ep_06_SUB_ITA.mp4")&&_(n,"src","http://www.danmachi.info/DDL/ANIME/ReZeroKaraHajimeruIsekaiSeikatsu2Part2/ReZeroKaraHajimeruIsekaiSeikatsu2Part2_Ep_06_SUB_ITA.mp4"),_(n,"class","svelte-157xj9s"),_(h,"type","text"),_(h,"placeholder","url video"),_(x,"type","range"),_(x,"class","mdl-slider"),_(x,"min","0"),_(x,"max",e[2]),T(x,"width","90%")},m(t,s){y(t,n,s),e[9](n),y(t,o,s),y(t,c,s),y(t,a,s),y(t,u,s),y(t,l,s),y(t,h,s),y(t,p,s),y(t,d,s),y(t,f,s),y(t,m,s),y(t,g,s),y(t,k,s),y(t,E,s),y(t,x,s),A(x,e[3]),S||($=[C(c,"click",(function(){i(e[6](e[0]))&&e[6](e[0]).apply(this,arguments)})),C(u,"click",(function(){i(e[7](e[0]))&&e[7](e[0]).apply(this,arguments)})),C(h,"change",e[10]),C(d,"click",e[8]),C(m,"click",e[11]),C(x,"change",e[12]),C(x,"input",e[12]),C(x,"input",e[13])],S=!0)},p(t,[n]){e=t,4&n&&_(x,"max",e[2]),8&n&&A(x,e[3])},i:t,o:t,d(t){t&&b(n),e[9](null),t&&b(o),t&&b(c),t&&b(a),t&&b(u),t&&b(l),t&&b(h),t&&b(p),t&&b(d),t&&b(f),t&&b(m),t&&b(g),t&&b(k),t&&b(E),t&&b(x),S=!1,r($)}}}function dt(t,e,n){const s=window.socket;let o,r=!1,i="",c=0,a=0;const u=window.idclient;function l(t){t.paused&&!r&&t.play()}function h(t){!t.paused&&r&&t.pause()}R((()=>{n(0,o.onplaying=()=>r=!0,o),n(0,o.ontimeupdate=()=>{n(2,c=o.duration),n(3,a=0|o.currentTime)},o),n(0,o.onpause=()=>r=!1,o),s.on("video",(async t=>{console.log(t);const e=t;"settime"==e.message&&(n(0,o.currentTime=e.time,o),n(3,a=e.time)),"urlchange"==e.message&&n(0,o.src=e.url,o),e.id!=u&&("play"==e.message&&(n(0,o.currentTime=e.time,o),l(o)),"pause"==e.message&&(n(0,o.currentTime=e.time,o),h(o)))}))}));return[o,i,c,a,s,u,function(t){s.emit("video",{message:"play",time:o.currentTime,id:u}),l(t)},function(t){s.emit("video",{message:"pause",time:o.currentTime,id:u}),h(t)},function(){0!==i.length&&(s.emit("video",{message:"urlchange",url:i,id:u}),r=!1)},function(t){q[t?"unshift":"push"]((()=>{o=t,n(0,o)}))},t=>n(1,i=t.target.value),()=>o.requestFullscreen(),function(){var t;t=this.value,a=""===t?null:+t,n(3,a)},t=>s.emit("video",{message:"settime",time:t.target.value,id:u})]}class ft extends ht{constructor(t){super(),lt(this,t,dt,pt,c,{})}}const mt=[];const gt=function(e,n=t){let s;const o=[];function r(t){if(c(e,t)&&(e=t,s)){const t=!mt.length;for(let t=0;t<o.length;t+=1){const n=o[t];n[1](),mt.push(n,e)}if(t){for(let t=0;t<mt.length;t+=2)mt[t][0](mt[t+1]);mt.length=0}}}return{set:r,update:function(t){r(t(e))},subscribe:function(i,c=t){const a=[i,c];return o.push(a),1===o.length&&(s=n(r)||t),i(e),()=>{const t=o.indexOf(a);-1!==t&&o.splice(t,1),0===o.length&&(s(),s=null)}}}}({});function yt(t,e,n){const s=t.slice();return s[23]=e[n],s}const bt=t=>({item:16&t}),wt=t=>({item:t[23].data});function kt(t,e){let n,s,o;const r=e[14].default,i=function(t,e,n,s){if(t){const o=a(t,e,n,s);return t[0](o)}}(r,e,e[13],wt),c=i||function(t){let e;return{c(){e=k("Missing template")},m(t,n){y(t,e,n)},d(t){t&&b(e)}}}();return{key:t,first:null,c(){n=w("svelte-virtual-list-row"),c&&c.c(),s=v(),E(n,"class","svelte-1tqh76q"),this.first=n},m(t,e){y(t,n,e),c&&c.m(n,null),g(n,s),o=!0},p(t,n){e=t,i&&i.p&&8208&n&&u(i,r,e,e[13],n,bt,wt)},i(t){o||(st(c,t),o=!0)},o(t){ot(c,t),o=!1},d(t){t&&b(n),c&&c.d(t)}}}function vt(t){let e,n,s,o,r,i,c=[],a=new Map,u=t[4];const l=t=>t[23].index;for(let e=0;e<u.length;e+=1){let n=yt(t,u,e),s=l(n);a.set(s,c[e]=kt(s,n))}return{c(){e=w("svelte-virtual-list-viewport"),n=w("svelte-virtual-list-contents");for(let t=0;t<c.length;t+=1)c[t].c();T(n,"padding-top",t[5]+"px"),T(n,"padding-bottom",t[6]+"px"),E(n,"class","svelte-1tqh76q"),T(e,"height",t[0]),E(e,"class","svelte-1tqh76q"),K((()=>t[17].call(e)))},m(a,u){y(a,e,u),g(e,n);for(let t=0;t<c.length;t+=1)c[t].m(n,null);t[15](n),t[16](e),s=function(t,e){"static"===getComputedStyle(t).position&&(t.style.position="relative");const n=w("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const s=$();let o;return s?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",o=C(window,"message",(t=>{t.source===n.contentWindow&&e()}))):(n.src="about:blank",n.onload=()=>{o=C(n.contentWindow,"resize",e)}),g(t,n),()=>{(s||o&&n.contentWindow)&&o(),b(n)}}(e,t[17].bind(e)),o=!0,r||(i=C(e,"scroll",t[7]),r=!0)},p(t,[s]){8208&s&&(u=t[4],et(),c=function(t,e,n,s,o,r,i,c,a,u,l,h){let p=t.length,d=r.length,f=p;const m={};for(;f--;)m[t[f].key]=f;const g=[],y=new Map,b=new Map;for(f=d;f--;){const t=h(o,r,f),c=n(t);let a=i.get(c);a?s&&a.p(t,e):(a=u(c,t),a.c()),y.set(c,g[f]=a),c in m&&b.set(c,Math.abs(f-m[c]))}const w=new Set,k=new Set;function v(t){st(t,1),t.m(c,l),i.set(t.key,t),l=t.first,d--}for(;p&&d;){const e=g[d-1],n=t[p-1],s=e.key,o=n.key;e===n?(l=e.first,p--,d--):y.has(o)?!i.has(s)||w.has(s)?v(e):k.has(o)?p--:b.get(s)>b.get(o)?(k.add(s),v(e)):(w.add(o),p--):(a(n,i),p--)}for(;p--;){const e=t[p];y.has(e.key)||a(e,i)}for(;d;)v(g[d-1]);return g}(c,s,l,1,t,u,a,n,it,kt,null,yt),nt()),(!o||32&s)&&T(n,"padding-top",t[5]+"px"),(!o||64&s)&&T(n,"padding-bottom",t[6]+"px"),(!o||1&s)&&T(e,"height",t[0])},i(t){if(!o){for(let t=0;t<u.length;t+=1)st(c[t]);o=!0}},o(t){for(let t=0;t<c.length;t+=1)ot(c[t]);o=!1},d(n){n&&b(e);for(let t=0;t<c.length;t+=1)c[t].d();t[15](null),t[16](null),s(),r=!1,i()}}}function Ct(t,e,n){let s,o,r,i,c,a,{$$slots:u={},$$scope:l}=e,{items:h}=e,{height:p="100%"}=e,{itemHeight:d}=e,{start:f=0}=e,{end:m=0}=e,g=[],y=0,b=0,w=0;return R((()=>{s=r.getElementsByTagName("svelte-virtual-list-row"),n(12,c=!0)})),t.$$set=t=>{"items"in t&&n(10,h=t.items),"height"in t&&n(0,p=t.height),"itemHeight"in t&&n(11,d=t.itemHeight),"start"in t&&n(8,f=t.start),"end"in t&&n(9,m=t.end),"$$scope"in t&&n(13,l=t.$$scope)},t.$$.update=()=>{1792&t.$$.dirty&&n(4,i=h.slice(f,m).map(((t,e)=>({index:e+f,data:t})))),7170&t.$$.dirty&&c&&async function(t,e,r){const{scrollTop:i}=o;await z();let c=b-i,u=f;for(;c<e&&u<t.length;){let t=s[u-f];t||(n(9,m=u+1),await z(),t=s[u-f]),c+=g[u]=r||t.offsetHeight,u+=1}n(9,m=u);const l=t.length-m;a=(b+c)/m,n(6,w=l*a),g.length=t.length}(h,y,d)},[p,y,o,r,i,b,w,async function(){const{scrollTop:t}=o,e=f;for(let t=0;t<s.length;t+=1)g[f+t]=d||s[t].offsetHeight;let r=0,i=0;for(;r<h.length;){const e=g[r]||a;if(i+e>t){n(8,f=r),n(5,b=i);break}i+=e,r+=1}for(;r<h.length&&(i+=g[r]||a,r+=1,!(i>t+y)););n(9,m=r);const c=h.length-m;for(a=i/m;r<h.length;)g[r++]=a;if(n(6,w=c*a),f<e){await z();let n=0,r=0;for(let t=f;t<e;t+=1)s[t-f]&&(n+=g[t],r+=d||s[t-f].offsetHeight);const i=r-n;o.scrollTo(0,t+i)}},f,m,h,d,c,l,u,function(t){q[t?"unshift":"push"]((()=>{r=t,n(3,r)}))},function(t){q[t?"unshift":"push"]((()=>{o=t,n(2,o)}))},function(){y=this.offsetHeight,n(1,y)}]}class _t extends ht{constructor(t){super(),lt(this,t,Ct,vt,c,{items:10,height:0,itemHeight:11,start:8,end:9})}}function Et(t){let e,n,s,o,r,i,c,a,u,l=t[2][t[6].id].nome+"",h=t[6].messaggio+"";return{c(){e=w("li"),n=w("span"),s=w("i"),s.textContent="person",o=v(),r=w("span"),i=k(l),c=v(),a=w("span"),u=k(h),_(s,"class","material-icons mdl-list__item-avatar"),_(a,"class","mdl-list__item-text-body"),_(n,"class","mdl-list__item-primary-content"),_(e,"class","mdl-list__item mdl-list__item--three-line")},m(t,l){y(t,e,l),g(e,n),g(n,s),g(n,o),g(n,r),g(r,i),g(n,c),g(n,a),g(a,u)},p(t,e){68&e&&l!==(l=t[2][t[6].id].nome+"")&&x(i,l),64&e&&h!==(h=t[6].messaggio+"")&&x(u,h)},d(t){t&&b(e)}}}function xt(t){let e,n,s,o,i,c,a,u,l,h;return s=new _t({props:{items:t[0],height:"500px",$$slots:{default:[Et,({item:t})=>({6:t}),({item:t})=>t?64:0]},$$scope:{ctx:t}}}),{c(){e=k("Chat:\r\n\r\n"),n=w("ul"),ct(s.$$.fragment),o=v(),i=w("input"),c=v(),a=w("button"),a.textContent="Invia",_(n,"class","demo-list-three mdl-list"),_(i,"type","text"),_(i,"placeholder","Messaggio"),_(a,"class","mdl-button mdl-button--raised")},m(r,p){y(r,e,p),y(r,n,p),at(s,n,null),y(r,o,p),y(r,i,p),A(i,t[1]),y(r,c,p),y(r,a,p),u=!0,l||(h=[C(i,"input",t[4]),C(a,"click",t[5])],l=!0)},p(t,[e]){const n={};1&e&&(n.items=t[0]),196&e&&(n.$$scope={dirty:e,ctx:t}),s.$set(n),2&e&&i.value!==t[1]&&A(i,t[1])},i(t){u||(st(s.$$.fragment,t),u=!0)},o(t){ot(s.$$.fragment,t),u=!1},d(t){t&&b(e),t&&b(n),ut(s),t&&b(o),t&&b(i),t&&b(c),t&&b(a),l=!1,r(h)}}}function At(t,e,n){const s=window.socket;let o=[];s.on("messaggi",(async t=>{n(0,o=[...o,t])}));let r="",i={};gt.subscribe((t=>n(2,i=t)));return[o,r,i,s,function(){r=this.value,n(1,r)},()=>{s.emit("messaggi",{id:window.idclient,messaggio:r}),n(1,r="")}]}class Tt extends ht{constructor(t){super(),lt(this,t,At,xt,c,{})}}function St(t){const e=t-1;return e*e*e+1}function $t(t){return--t*t*t*t*t+1}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function Ot(t){var{fallback:e}=t,s=function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(t);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(t,s[o])&&(n[s[o]]=t[s[o]])}return n}(t,["fallback"]);const o=new Map,r=new Map;function c(t,o,r){return(c,a)=>(t.set(a.key,{rect:c.getBoundingClientRect()}),()=>{if(o.has(a.key)){const{rect:t}=o.get(a.key);return o.delete(a.key),function(t,e,o){const{delay:r=0,duration:c=(t=>30*Math.sqrt(t)),easing:a=St}=n(n({},s),o),u=e.getBoundingClientRect(),l=t.left-u.left,h=t.top-u.top,p=t.width/u.width,d=t.height/u.height,f=Math.sqrt(l*l+h*h),m=getComputedStyle(e),g="none"===m.transform?"":m.transform,y=+m.opacity;return{delay:r,duration:i(c)?c(f):c,easing:a,css:(t,e)=>`\n\t\t\t\topacity: ${t*y};\n\t\t\t\ttransform-origin: top left;\n\t\t\t\ttransform: ${g} translate(${e*l}px,${e*h}px) scale(${t+(1-t)*p}, ${t+(1-t)*d});\n\t\t\t`}}(t,c,a)}return t.delete(a.key),e&&e(c,a,r)})}return[c(r,o,!1),c(o,r,!0)]}function Bt(t,e,n){const s=t.slice();return s[8]=e[n],s}function Pt(n){let s,o,c,a,u,l=n[8].nome+"";return{c(){s=w("li"),o=k(l)},m(t,e){y(t,s,e),g(s,o),u=!0},p(t,e){n=t,(!u||1&e)&&l!==(l=n[8].nome+"")&&x(o,l)},i(o){u||(K((()=>{a&&a.end(1),c||(c=function(n,s,o){let r,c,a=s(n,o),u=!1,l=0;function p(){r&&F(n,r)}function d(){const{delay:s=0,duration:o=300,easing:i=e,tick:d=t,css:f}=a||rt;f&&(r=N(n,0,1,o,s,i,f,l++)),d(0,1);const g=h()+s,y=g+o;c&&c.abort(),u=!0,K((()=>Z(n,!0,"start"))),c=m((t=>{if(u){if(t>=y)return d(1,0),Z(n,!0,"end"),p(),u=!1;if(t>=g){const e=i((t-g)/o);d(e,1-e)}}return u}))}let f=!1;return{start(){f||(F(n),i(a)?(a=a(),G().then(d)):d())},invalidate(){f=!1},end(){u&&(p(),u=!1)}}}(s,n[4],{key:n[8].id,type:"in"})),c.start()})),u=!0)},o(o){c&&c.invalidate(),a=function(n,s,o){let c,a=s(n,o),u=!0;const l=tt;function p(){const{delay:s=0,duration:o=300,easing:i=e,tick:p=t,css:d}=a||rt;d&&(c=N(n,1,0,o,s,i,d));const f=h()+s,g=f+o;K((()=>Z(n,!1,"start"))),m((t=>{if(u){if(t>=g)return p(0,1),Z(n,!1,"end"),--l.r||r(l.c),!1;if(t>=f){const e=i((t-f)/o);p(1-e,e)}}return u}))}return l.r+=1,i(a)?G().then((()=>{a=a(),p()})):p(),{end(t){t&&a.tick&&a.tick(1,0),u&&(c&&F(n,c),u=!1)}}}(s,n[3],{key:n[8].id,type:"out"}),u=!1},d(t){t&&b(s),t&&a&&a.end()}}}function Nt(t){let e,n,s,o,i,c,a,u,l,h,p=t[0].filter(Ft),d=[];for(let e=0;e<p.length;e+=1)d[e]=Pt(Bt(t,p,e));const f=t=>ot(d[t],1,1,(()=>{d[t]=null}));return{c(){e=w("input"),n=v(),s=w("br"),o=k("\r\nLista utenti:\r\n"),i=w("br"),c=v(),a=w("ul");for(let t=0;t<d.length;t+=1)d[t].c();_(e,"placeholder","Nome"),_(a,"id","list")},m(r,p){y(r,e,p),A(e,t[1]),y(r,n,p),y(r,s,p),y(r,o,p),y(r,i,p),y(r,c,p),y(r,a,p);for(let t=0;t<d.length;t+=1)d[t].m(a,null);u=!0,l||(h=[C(e,"input",t[5]),C(e,"input",t[6])],l=!0)},p(t,[n]){if(2&n&&e.value!==t[1]&&A(e,t[1]),1&n){let e;for(p=t[0].filter(Ft),e=0;e<p.length;e+=1){const s=Bt(t,p,e);d[e]?(d[e].p(s,n),st(d[e],1)):(d[e]=Pt(s),d[e].c(),st(d[e],1),d[e].m(a,null))}for(et(),e=p.length;e<d.length;e+=1)f(e);nt()}},i(t){if(!u){for(let t=0;t<p.length;t+=1)st(d[t]);u=!0}},o(t){d=d.filter(Boolean);for(let t=0;t<d.length;t+=1)ot(d[t]);u=!1},d(t){t&&b(e),t&&b(n),t&&b(s),t&&b(o),t&&b(i),t&&b(c),t&&b(a),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(d,t),l=!1,r(h)}}}const Ft=t=>!t.deleted;function jt(t,e,n){let s=[];gt.subscribe((t=>n(0,s=Object.values(t))));const o=window.socket;let r={};o.on("nome",(async t=>{console.log(t),"delete"==t.type?r[t.id].deleted=!0:r[t.id]=t,gt.update((()=>r))}));let i="Nuova connessione";o.on("requestnomi",(async t=>{o.emit("nome",{id:window.idclient,nome:i})}));const[c,a]=Ot({duration:t=>Math.sqrt(200*t),fallback(t,e){const n=getComputedStyle(t),s="none"===n.transform?"":n.transform;return{duration:800,easing:$t,css:t=>`\n\t\t\t\t\ttransform: ${s} scale(${t});\n                    opacity: ${t};\n                    color:${"in"===e.type?"green":"red"}\n\t\t\t\t`}}});return[s,i,o,c,a,t=>{o.emit("nome",{id:window.idclient,nome:t.target.value})},function(){i=this.value,n(1,i)}]}class Rt extends ht{constructor(t){super(),lt(this,t,jt,Nt,c,{})}}function Mt(e){let n,s,o,r,i,c,a,u,l,h;return o=new ft({}),c=new Rt({}),l=new Tt({}),{c(){n=w("div"),s=w("div"),ct(o.$$.fragment),r=v(),i=w("div"),ct(c.$$.fragment),a=v(),u=w("div"),ct(l.$$.fragment),_(s,"class","mdl-cell mdl-cell--8-col"),T(s,"background","#404040"),_(i,"class","mdl-cell mdl-cell--2-col"),T(i,"background","#404040"),_(u,"class","mdl-cell mdl-cell--2-col"),T(u,"background","#404040"),_(n,"class","mdl-grid")},m(t,e){y(t,n,e),g(n,s),at(o,s,null),g(n,r),g(n,i),at(c,i,null),g(n,a),g(n,u),at(l,u,null),h=!0},p:t,i(t){h||(st(o.$$.fragment,t),st(c.$$.fragment,t),st(l.$$.fragment,t),h=!0)},o(t){ot(o.$$.fragment,t),ot(c.$$.fragment,t),ot(l.$$.fragment,t),h=!1},d(t){t&&b(n),ut(o),ut(c),ut(l)}}}function qt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Lt(t){var e={exports:{}};return t(e,e.exports),e.exports}var Dt=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,It=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],Ht=function(t){var e=t,n=t.indexOf("["),s=t.indexOf("]");-1!=n&&-1!=s&&(t=t.substring(0,n)+t.substring(n,s).replace(/:/g,";")+t.substring(s,t.length));for(var o,r,i=Dt.exec(t||""),c={},a=14;a--;)c[It[a]]=i[a]||"";return-1!=n&&-1!=s&&(c.source=e,c.host=c.host.substring(1,c.host.length-1).replace(/;/g,":"),c.authority=c.authority.replace("[","").replace("]","").replace(/;/g,":"),c.ipv6uri=!0),c.pathNames=function(t,e){var n=/\/{2,9}/g,s=e.replace(n,"/").split("/");"/"!=e.substr(0,1)&&0!==e.length||s.splice(0,1);"/"==e.substr(e.length-1,1)&&s.splice(s.length-1,1);return s}(0,c.path),c.queryKey=(o=c.query,r={},o.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(t,e,n){e&&(r[e]=n)})),r),c};var Vt=1e3,zt=60*Vt,Kt=60*zt,Ut=24*Kt,Yt=7*Ut,Wt=365.25*Ut,Xt=function(t,e){e=e||{};var n=typeof t;if("string"===n&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!e)return;var n=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*Wt;case"weeks":case"week":case"w":return n*Yt;case"days":case"day":case"d":return n*Ut;case"hours":case"hour":case"hrs":case"hr":case"h":return n*Kt;case"minutes":case"minute":case"mins":case"min":case"m":return n*zt;case"seconds":case"second":case"secs":case"sec":case"s":return n*Vt;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}(t);if("number"===n&&isFinite(t))return e.long?function(t){var e=Math.abs(t);if(e>=Ut)return Jt(t,e,Ut,"day");if(e>=Kt)return Jt(t,e,Kt,"hour");if(e>=zt)return Jt(t,e,zt,"minute");if(e>=Vt)return Jt(t,e,Vt,"second");return t+" ms"}(t):function(t){var e=Math.abs(t);if(e>=Ut)return Math.round(t/Ut)+"d";if(e>=Kt)return Math.round(t/Kt)+"h";if(e>=zt)return Math.round(t/zt)+"m";if(e>=Vt)return Math.round(t/Vt)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function Jt(t,e,n,s){var o=e>=1.5*n;return Math.round(t/n)+" "+s+(o?"s":"")}var Gt=function(t){function e(t){let s,o=null;function r(...t){if(!r.enabled)return;const n=r,o=Number(new Date),i=o-(s||o);n.diff=i,n.prev=s,n.curr=o,s=o,t[0]=e.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let c=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,((s,o)=>{if("%%"===s)return"%";c++;const r=e.formatters[o];if("function"==typeof r){const e=t[c];s=r.call(n,e),t.splice(c,1),c--}return s})),e.formatArgs.call(n,t);(n.log||e.log).apply(n,t)}return r.namespace=t,r.useColors=e.useColors(),r.color=e.selectColor(t),r.extend=n,r.destroy=e.destroy,Object.defineProperty(r,"enabled",{enumerable:!0,configurable:!1,get:()=>null===o?e.enabled(t):o,set:t=>{o=t}}),"function"==typeof e.init&&e.init(r),r}function n(t,n){const s=e(this.namespace+(void 0===n?":":n)+t);return s.log=this.log,s}function s(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return e.debug=e,e.default=e,e.coerce=function(t){if(t instanceof Error)return t.stack||t.message;return t},e.disable=function(){const t=[...e.names.map(s),...e.skips.map(s).map((t=>"-"+t))].join(",");return e.enable(""),t},e.enable=function(t){let n;e.save(t),e.names=[],e.skips=[];const s=("string"==typeof t?t:"").split(/[\s,]+/),o=s.length;for(n=0;n<o;n++)s[n]&&("-"===(t=s[n].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){if("*"===t[t.length-1])return!0;let n,s;for(n=0,s=e.skips.length;n<s;n++)if(e.skips[n].test(t))return!1;for(n=0,s=e.names.length;n<s;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=Xt,e.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach((n=>{e[n]=t[n]})),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(t){let n=0;for(let e=0;e<t.length;e++)n=(n<<5)-n+t.charCodeAt(e),n|=0;return e.colors[Math.abs(n)%e.colors.length]},e.enable(e.load()),e},Zt=Lt((function(t,e){e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;e.splice(1,0,n,"color: inherit");let s=0,o=0;e[0].replace(/%[a-zA-Z%]/g,(t=>{"%%"!==t&&(s++,"%c"===t&&(o=s))})),e.splice(o,0,n)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){let t;try{t=e.storage.getItem("debug")}catch(t){}!t&&"undefined"!=typeof process&&"env"in process&&(t=process.env.DEBUG);return t},e.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage=function(){try{return localStorage}catch(t){}}(),e.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||(()=>{}),t.exports=Gt(e);const{formatters:n}=t.exports;n.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}})),Qt=Lt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.url=void 0;const n=Zt("socket.io-client:url");e.url=function(t,e="",s){let o=t;s=s||"undefined"!=typeof location&&location,null==t&&(t=s.protocol+"//"+s.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?s.protocol+t:s.host+t),/^(https?|wss?):\/\//.test(t)||(n("protocol-less url %s",t),t=void 0!==s?s.protocol+"//"+t:"https://"+t),n("parse %s",t),o=Ht(t)),o.port||(/^(http|ws)$/.test(o.protocol)?o.port="80":/^(http|ws)s$/.test(o.protocol)&&(o.port="443")),o.path=o.path||"/";const r=-1!==o.host.indexOf(":")?"["+o.host+"]":o.host;return o.id=o.protocol+"://"+r+":"+o.port+e,o.href=o.protocol+"://"+r+(s&&s.port===o.port?"":":"+o.port),o}})),te=Lt((function(t){try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){t.exports=!1}})),ee="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")(),ne=function(t){const e=t.xdomain,n=t.xscheme,s=t.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!e||te))return new XMLHttpRequest}catch(t){}try{if("undefined"!=typeof XDomainRequest&&!n&&s)return new XDomainRequest}catch(t){}if(!e)try{return new(ee[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}};const se=Object.create(null);se.open="0",se.close="1",se.ping="2",se.pong="3",se.message="4",se.upgrade="5",se.noop="6";const oe=Object.create(null);Object.keys(se).forEach((t=>{oe[se[t]]=t}));var re={PACKET_TYPES:se,PACKET_TYPES_REVERSE:oe,ERROR_PACKET:{type:"error",data:"parser error"}};const{PACKET_TYPES:ie}=re,ce="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),ae="function"==typeof ArrayBuffer,ue=(t,e)=>{const n=new FileReader;return n.onload=function(){const t=n.result.split(",")[1];e("b"+t)},n.readAsDataURL(t)};var le=({type:t,data:e},n,s)=>{return ce&&e instanceof Blob?n?s(e):ue(e,s):ae&&(e instanceof ArrayBuffer||(o=e,"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(o):o&&o.buffer instanceof ArrayBuffer))?n?s(e instanceof ArrayBuffer?e:e.buffer):ue(new Blob([e]),s):s(ie[t]+(e||""));var o},he=Lt((function(t,e){var n;n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e.encode=function(t){var e,s=new Uint8Array(t),o=s.length,r="";for(e=0;e<o;e+=3)r+=n[s[e]>>2],r+=n[(3&s[e])<<4|s[e+1]>>4],r+=n[(15&s[e+1])<<2|s[e+2]>>6],r+=n[63&s[e+2]];return o%3==2?r=r.substring(0,r.length-1)+"=":o%3==1&&(r=r.substring(0,r.length-2)+"=="),r},e.decode=function(t){var e,s,o,r,i,c=.75*t.length,a=t.length,u=0;"="===t[t.length-1]&&(c--,"="===t[t.length-2]&&c--);var l=new ArrayBuffer(c),h=new Uint8Array(l);for(e=0;e<a;e+=4)s=n.indexOf(t[e]),o=n.indexOf(t[e+1]),r=n.indexOf(t[e+2]),i=n.indexOf(t[e+3]),h[u++]=s<<2|o>>4,h[u++]=(15&o)<<4|r>>2,h[u++]=(3&r)<<6|63&i;return l}}));const{PACKET_TYPES_REVERSE:pe,ERROR_PACKET:de}=re;let fe;"function"==typeof ArrayBuffer&&(fe=he);const me=(t,e)=>{if(fe){const n=fe.decode(t);return ge(n,e)}return{base64:!0,data:t}},ge=(t,e)=>{switch(e){case"blob":return t instanceof ArrayBuffer?new Blob([t]):t;case"arraybuffer":default:return t}};var ye=(t,e)=>{if("string"!=typeof t)return{type:"message",data:ge(t,e)};const n=t.charAt(0);if("b"===n)return{type:"message",data:me(t.substring(1),e)};return pe[n]?t.length>1?{type:pe[n],data:t.substring(1)}:{type:pe[n]}:de};const be=String.fromCharCode(30);var we={protocol:4,encodePacket:le,encodePayload:(t,e)=>{const n=t.length,s=new Array(n);let o=0;t.forEach(((t,r)=>{le(t,!1,(t=>{s[r]=t,++o===n&&e(s.join(be))}))}))},decodePacket:ye,decodePayload:(t,e)=>{const n=t.split(be),s=[];for(let t=0;t<n.length;t++){const o=ye(n[t],e);if(s.push(o),"error"===o.type)break}return s}},ke=Lt((function(t){function e(t){if(t)return function(t){for(var n in e.prototype)t[n]=e.prototype[n];return t}(t)}t.exports=e,e.prototype.on=e.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},e.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,s=this._callbacks["$"+t];if(!s)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var o=0;o<s.length;o++)if((n=s[o])===e||n.fn===e){s.splice(o,1);break}return 0===s.length&&delete this._callbacks["$"+t],this},e.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],s=1;s<arguments.length;s++)e[s-1]=arguments[s];if(n){s=0;for(var o=(n=n.slice(0)).length;s<o;++s)n[s].apply(this,e)}return this},e.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},e.prototype.hasListeners=function(t){return!!this.listeners(t).length}}));var ve,Ce=class extends ke{constructor(t){super(),this.opts=t,this.query=t.query,this.readyState="",this.socket=t.socket}onError(t,e){const n=new Error(t);return n.type="TransportError",n.description=e,this.emit("error",n),this}open(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(t){if("open"!==this.readyState)throw new Error("Transport not open");this.write(t)}onOpen(){this.readyState="open",this.writable=!0,this.emit("open")}onData(t){const e=we.decodePacket(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){this.emit("packet",t)}onClose(){this.readyState="closed",this.emit("close")}},_e=function(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e},Ee=function(t){for(var e={},n=t.split("&"),s=0,o=n.length;s<o;s++){var r=n[s].split("=");e[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return e},xe="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),Ae={},Te=0,Se=0;function $e(t){var e="";do{e=xe[t%64]+e,t=Math.floor(t/64)}while(t>0);return e}function Oe(){var t=$e(+new Date);return t!==ve?(Te=0,ve=t):t+"."+$e(Te++)}for(;Se<64;Se++)Ae[xe[Se]]=Se;Oe.encode=$e,Oe.decode=function(t){var e=0;for(Se=0;Se<t.length;Se++)e=64*e+Ae[t.charAt(Se)];return e};var Be=Oe;const Pe=Zt("engine.io-client:polling");var Ne=class extends Ce{get name(){return"polling"}doOpen(){this.poll()}pause(t){const e=this;function n(){Pe("paused"),e.readyState="paused",t()}if(this.readyState="pausing",this.polling||!this.writable){let t=0;this.polling&&(Pe("we are currently polling - waiting to pause"),t++,this.once("pollComplete",(function(){Pe("pre-pause polling complete"),--t||n()}))),this.writable||(Pe("we are currently writing - waiting to pause"),t++,this.once("drain",(function(){Pe("pre-pause writing complete"),--t||n()})))}else n()}poll(){Pe("polling"),this.polling=!0,this.doPoll(),this.emit("poll")}onData(t){const e=this;Pe("polling got data %s",t);we.decodePayload(t,this.socket.binaryType).forEach((function(t,n,s){if("opening"===e.readyState&&"open"===t.type&&e.onOpen(),"close"===t.type)return e.onClose(),!1;e.onPacket(t)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():Pe('ignoring poll - transport state "%s"',this.readyState))}doClose(){const t=this;function e(){Pe("writing close packet"),t.write([{type:"close"}])}"open"===this.readyState?(Pe("transport open - closing"),e()):(Pe("transport not open - deferring close"),this.once("open",e))}write(t){this.writable=!1,we.encodePayload(t,(t=>{this.doWrite(t,(()=>{this.writable=!0,this.emit("drain")}))}))}uri(){let t=this.query||{};const e=this.opts.secure?"https":"http";let n="";!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=Be()),this.supportsBinary||t.sid||(t.b64=1),t=_e(t),this.opts.port&&("https"===e&&443!==Number(this.opts.port)||"http"===e&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),t.length&&(t="?"+t);return e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+t}},Fe={pick:(t,...e)=>e.reduce(((e,n)=>(t.hasOwnProperty(n)&&(e[n]=t[n]),e)),{})};const{pick:je}=Fe,Re=Zt("engine.io-client:polling-xhr");function Me(){}const qe=null!=new ne({xdomain:!1}).responseType;class Le extends ke{constructor(t,e){super(),this.opts=e,this.method=e.method||"GET",this.uri=t,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.create()}create(){const t=je(this.opts,"agent","enablesXDR","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;const e=this.xhr=new ne(t),n=this;try{Re("xhr open %s: %s",this.method,this.uri),e.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){e.setDisableHeaderCheck&&e.setDisableHeaderCheck(!0);for(let t in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(t)&&e.setRequestHeader(t,this.opts.extraHeaders[t])}}catch(t){}if("POST"===this.method)try{e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{e.setRequestHeader("Accept","*/*")}catch(t){}"withCredentials"in e&&(e.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(e.timeout=this.opts.requestTimeout),this.hasXDR()?(e.onload=function(){n.onLoad()},e.onerror=function(){n.onError(e.responseText)}):e.onreadystatechange=function(){4===e.readyState&&(200===e.status||1223===e.status?n.onLoad():setTimeout((function(){n.onError("number"==typeof e.status?e.status:0)}),0))},Re("xhr data %s",this.data),e.send(this.data)}catch(t){return void setTimeout((function(){n.onError(t)}),0)}"undefined"!=typeof document&&(this.index=Le.requestsCount++,Le.requests[this.index]=this)}onSuccess(){this.emit("success"),this.cleanup()}onData(t){this.emit("data",t),this.onSuccess()}onError(t){this.emit("error",t),this.cleanup(!0)}cleanup(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=Me:this.xhr.onreadystatechange=Me,t)try{this.xhr.abort()}catch(t){}"undefined"!=typeof document&&delete Le.requests[this.index],this.xhr=null}}onLoad(){const t=this.xhr.responseText;null!==t&&this.onData(t)}hasXDR(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR}abort(){this.cleanup()}}if(Le.requestsCount=0,Le.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",De);else if("function"==typeof addEventListener){addEventListener("onpagehide"in ee?"pagehide":"unload",De,!1)}function De(){for(let t in Le.requests)Le.requests.hasOwnProperty(t)&&Le.requests[t].abort()}var Ie=class extends Ne{constructor(t){if(super(t),"undefined"!=typeof location){const e="https:"===location.protocol;let n=location.port;n||(n=e?443:80),this.xd="undefined"!=typeof location&&t.hostname!==location.hostname||n!==t.port,this.xs=t.secure!==e}const e=t&&t.forceBase64;this.supportsBinary=qe&&!e}request(t={}){return Object.assign(t,{xd:this.xd,xs:this.xs},this.opts),new Le(this.uri(),t)}doWrite(t,e){const n=this.request({method:"POST",data:t}),s=this;n.on("success",e),n.on("error",(function(t){s.onError("xhr post error",t)}))}doPoll(){Re("xhr poll");const t=this.request(),e=this;t.on("data",(function(t){e.onData(t)})),t.on("error",(function(t){e.onError("xhr poll error",t)})),this.pollXhr=t}},He=Le;Ie.Request=He;const Ve=/\n/g,ze=/\\n/g;let Ke;function Ue(){}var Ye=class extends Ne{constructor(t){super(t),this.query=this.query||{},Ke||(Ke=ee.___eio=ee.___eio||[]),this.index=Ke.length;const e=this;Ke.push((function(t){e.onData(t)})),this.query.j=this.index,"function"==typeof addEventListener&&addEventListener("beforeunload",(function(){e.script&&(e.script.onerror=Ue)}),!1)}get supportsBinary(){return!1}doClose(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),super.doClose()}doPoll(){const t=this,e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError("jsonp poll error",e)};const n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(e,n):(document.head||document.body).appendChild(e),this.script=e;"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout((function(){const t=document.createElement("iframe");document.body.appendChild(t),document.body.removeChild(t)}),100)}doWrite(t,e){const n=this;let s;if(!this.form){const t=document.createElement("form"),e=document.createElement("textarea"),n=this.iframeId="eio_iframe_"+this.index;t.className="socketio",t.style.position="absolute",t.style.top="-1000px",t.style.left="-1000px",t.target=n,t.method="POST",t.setAttribute("accept-charset","utf-8"),e.name="d",t.appendChild(e),document.body.appendChild(t),this.form=t,this.area=e}function o(){r(),e()}function r(){if(n.iframe)try{n.form.removeChild(n.iframe)}catch(t){n.onError("jsonp polling iframe removal error",t)}try{const t='<iframe src="javascript:0" name="'+n.iframeId+'">';s=document.createElement(t)}catch(t){s=document.createElement("iframe"),s.name=n.iframeId,s.src="javascript:0"}s.id=n.iframeId,n.form.appendChild(s),n.iframe=s}this.form.action=this.uri(),r(),t=t.replace(ze,"\\\n"),this.area.value=t.replace(Ve,"\\n");try{this.form.submit()}catch(t){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===n.iframe.readyState&&o()}:this.iframe.onload=o}},We={WebSocket:ee.WebSocket||ee.MozWebSocket,usingBrowserWebSocket:!0,defaultBinaryType:"arraybuffer"};const{pick:Xe}=Fe,{WebSocket:Je,usingBrowserWebSocket:Ge,defaultBinaryType:Ze}=We,Qe=Zt("engine.io-client:websocket"),tn="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class en extends Ce{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const t=this.uri(),e=this.opts.protocols,n=tn?{}:Xe(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=Ge&&!tn?e?new Je(t,e):new Je(t):new Je(t,e,n)}catch(t){return this.emit("error",t)}this.ws.binaryType=this.socket.binaryType||Ze,this.addEventListeners()}addEventListeners(){const t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}}write(t){const e=this;this.writable=!1;let n=t.length,s=0;const o=n;for(;s<o;s++)!function(t){we.encodePacket(t,e.supportsBinary,(function(s){const o={};if(!Ge&&(t.options&&(o.compress=t.options.compress),e.opts.perMessageDeflate)){("string"==typeof s?Buffer.byteLength(s):s.length)<e.opts.perMessageDeflate.threshold&&(o.compress=!1)}try{Ge?e.ws.send(s):e.ws.send(s,o)}catch(t){Qe("websocket closed before onclose event")}--n||r()}))}(t[s]);function r(){e.emit("flush"),setTimeout((function(){e.writable=!0,e.emit("drain")}),0)}}onClose(){Ce.prototype.onClose.call(this)}doClose(){void 0!==this.ws&&this.ws.close()}uri(){let t=this.query||{};const e=this.opts.secure?"wss":"ws";let n="";this.opts.port&&("wss"===e&&443!==Number(this.opts.port)||"ws"===e&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),this.opts.timestampRequests&&(t[this.opts.timestampParam]=Be()),this.supportsBinary||(t.b64=1),t=_e(t),t.length&&(t="?"+t);return e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+t}check(){return!(!Je||"__initialize"in Je&&this.name===en.prototype.name)}}var nn={polling:function(t){let e,n=!1,s=!1;const o=!1!==t.jsonp;if("undefined"!=typeof location){const e="https:"===location.protocol;let o=location.port;o||(o=e?443:80),n=t.hostname!==location.hostname||o!==t.port,s=t.secure!==e}if(t.xdomain=n,t.xscheme=s,e=new ne(t),"open"in e&&!t.forceJSONP)return new Ie(t);if(!o)throw new Error("JSONP disabled");return new Ye(t)},websocket:en};const sn=Zt("engine.io-client:socket");class on extends ke{constructor(t,e={}){super(),t&&"object"==typeof t&&(e=t,t=null),t?(t=Ht(t),e.hostname=t.host,e.secure="https"===t.protocol||"wss"===t.protocol,e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=Ht(e.host).host),this.secure=null!=e.secure?e.secure:"undefined"!=typeof location&&"https:"===location.protocol,e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=e.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.transports=e.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,jsonp:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{}},e),this.opts.path=this.opts.path.replace(/\/$/,"")+"/","string"==typeof this.opts.query&&(this.opts.query=Ee(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,this.open()}createTransport(t){sn('creating transport "%s"',t);const e=function(t){const e={};for(let n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}(this.opts.query);e.EIO=we.protocol,e.transport=t,this.id&&(e.sid=this.id);const n=Object.assign({},this.opts.transportOptions[t],this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return sn("options: %j",n),new nn[t](n)}open(){let t;if(this.opts.rememberUpgrade&&on.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length){const t=this;return void setTimeout((function(){t.emit("error","No transports available")}),0)}t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return sn("error while creating transport: %s",t),this.transports.shift(),void this.open()}t.open(),this.setTransport(t)}setTransport(t){sn("setting transport %s",t.name);const e=this;this.transport&&(sn("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",(function(){e.onDrain()})).on("packet",(function(t){e.onPacket(t)})).on("error",(function(t){e.onError(t)})).on("close",(function(){e.onClose("transport close")}))}probe(t){sn('probing transport "%s"',t);let e=this.createTransport(t,{probe:1}),n=!1;const s=this;function o(){if(s.onlyBinaryUpgrades){const t=!this.supportsBinary&&s.transport.supportsBinary;n=n||t}n||(sn('probe transport "%s" opened',t),e.send([{type:"ping",data:"probe"}]),e.once("packet",(function(o){if(!n)if("pong"===o.type&&"probe"===o.data){if(sn('probe transport "%s" pong',t),s.upgrading=!0,s.emit("upgrading",e),!e)return;on.priorWebsocketSuccess="websocket"===e.name,sn('pausing current transport "%s"',s.transport.name),s.transport.pause((function(){n||"closed"!==s.readyState&&(sn("changing transport and sending upgrade packet"),l(),s.setTransport(e),e.send([{type:"upgrade"}]),s.emit("upgrade",e),e=null,s.upgrading=!1,s.flush())}))}else{sn('probe transport "%s" failed',t);const n=new Error("probe error");n.transport=e.name,s.emit("upgradeError",n)}})))}function r(){n||(n=!0,l(),e.close(),e=null)}function i(n){const o=new Error("probe error: "+n);o.transport=e.name,r(),sn('probe transport "%s" failed because of error: %s',t,n),s.emit("upgradeError",o)}function c(){i("transport closed")}function a(){i("socket closed")}function u(t){e&&t.name!==e.name&&(sn('"%s" works - aborting "%s"',t.name,e.name),r())}function l(){e.removeListener("open",o),e.removeListener("error",i),e.removeListener("close",c),s.removeListener("close",a),s.removeListener("upgrading",u)}on.priorWebsocketSuccess=!1,e.once("open",o),e.once("error",i),e.once("close",c),this.once("close",a),this.once("upgrading",u),e.open()}onOpen(){if(sn("socket open"),this.readyState="open",on.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause){sn("starting upgrade probes");let t=0;const e=this.upgrades.length;for(;t<e;t++)this.probe(this.upgrades[t])}}onPacket(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(sn('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emit("pong");break;case"error":const e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}else sn('packet received with socket readyState "%s"',this.readyState)}onHandshake(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){clearTimeout(this.pingTimeoutTimer),this.pingTimeoutTimer=setTimeout((()=>{this.onClose("ping timeout")}),this.pingInterval+this.pingTimeout)}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()}flush(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(sn("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))}write(t,e,n){return this.sendPacket("message",t,e,n),this}send(t,e,n){return this.sendPacket("message",t,e,n),this}sendPacket(t,e,n,s){if("function"==typeof e&&(s=e,e=void 0),"function"==typeof n&&(s=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const o={type:t,data:e,options:n};this.emit("packetCreate",o),this.writeBuffer.push(o),s&&this.once("flush",s),this.flush()}close(){const t=this;function e(){t.onClose("forced close"),sn("socket closing - telling transport to close"),t.transport.close()}function n(){t.removeListener("upgrade",n),t.removeListener("upgradeError",n),e()}function s(){t.once("upgrade",n),t.once("upgradeError",n)}return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(function(){this.upgrading?s():e()})):this.upgrading?s():e()),this}onError(t){sn("socket error %j",t),on.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)}onClose(t,e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){sn('socket close with reason: "%s"',t);const n=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,e),n.writeBuffer=[],n.prevBufferLen=0}}filterUpgrades(t){const e=[];let n=0;const s=t.length;for(;n<s;n++)~this.transports.indexOf(t[n])&&e.push(t[n]);return e}}on.priorWebsocketSuccess=!1,on.protocol=we.protocol;var rn=on,cn=(t,e)=>new rn(t,e),an=rn,un=rn.protocol,ln=Ce,hn=nn,pn=we;cn.Socket=an,cn.protocol=un,cn.Transport=ln,cn.transports=hn,cn.parser=pn;var dn=Lt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.hasBinary=e.isBinary=void 0;const n="function"==typeof ArrayBuffer,s=Object.prototype.toString,o="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===s.call(Blob),r="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===s.call(File);function i(t){return n&&(t instanceof ArrayBuffer||(t=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer)(t))||o&&t instanceof Blob||r&&t instanceof File}e.isBinary=i,e.hasBinary=function t(e,n){if(!e||"object"!=typeof e)return!1;if(Array.isArray(e)){for(let n=0,s=e.length;n<s;n++)if(t(e[n]))return!0;return!1}if(i(e))return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return t(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return!0;return!1}})),fn=Lt((function(t,e){function n(t,e){if(!t)return t;if(dn.isBinary(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}if(Array.isArray(t)){const s=new Array(t.length);for(let o=0;o<t.length;o++)s[o]=n(t[o],e);return s}if("object"==typeof t&&!(t instanceof Date)){const s={};for(const o in t)t.hasOwnProperty(o)&&(s[o]=n(t[o],e));return s}return t}function s(t,e){if(!t)return t;if(t&&t._placeholder)return e[t.num];if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=s(t[n],e);else if("object"==typeof t)for(const n in t)t.hasOwnProperty(n)&&(t[n]=s(t[n],e));return t}Object.defineProperty(e,"__esModule",{value:!0}),e.reconstructPacket=e.deconstructPacket=void 0,e.deconstructPacket=function(t){const e=[],s=t.data,o=t;return o.data=n(s,e),o.attachments=e.length,{packet:o,buffers:e}},e.reconstructPacket=function(t,e){return t.data=s(t.data,e),t.attachments=void 0,t}})),mn=Lt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Decoder=e.Encoder=e.PacketType=e.protocol=void 0;const n=Zt("socket.io-parser");var s;e.protocol=5,function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"}(s=e.PacketType||(e.PacketType={}));e.Encoder=class{encode(t){return n("encoding packet %j",t),t.type!==s.EVENT&&t.type!==s.ACK||!dn.hasBinary(t)?[this.encodeAsString(t)]:(t.type=t.type===s.EVENT?s.BINARY_EVENT:s.BINARY_ACK,this.encodeAsBinary(t))}encodeAsString(t){let e=""+t.type;return t.type!==s.BINARY_EVENT&&t.type!==s.BINARY_ACK||(e+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(e+=t.nsp+","),null!=t.id&&(e+=t.id),null!=t.data&&(e+=JSON.stringify(t.data)),n("encoded %j as %s",t,e),e}encodeAsBinary(t){const e=fn.deconstructPacket(t),n=this.encodeAsString(e.packet),s=e.buffers;return s.unshift(n),s}};class o extends ke{constructor(){super()}add(t){let e;if("string"==typeof t)e=this.decodeString(t),e.type===s.BINARY_EVENT||e.type===s.BINARY_ACK?(this.reconstructor=new r(e),0===e.attachments&&super.emit("decoded",e)):super.emit("decoded",e);else{if(!dn.isBinary(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emit("decoded",e))}}decodeString(t){let e=0;const r={type:Number(t.charAt(0))};if(void 0===s[r.type])throw new Error("unknown packet type "+r.type);if(r.type===s.BINARY_EVENT||r.type===s.BINARY_ACK){const n=e+1;for(;"-"!==t.charAt(++e)&&e!=t.length;);const s=t.substring(n,e);if(s!=Number(s)||"-"!==t.charAt(e))throw new Error("Illegal attachments");r.attachments=Number(s)}if("/"===t.charAt(e+1)){const n=e+1;for(;++e;){if(","===t.charAt(e))break;if(e===t.length)break}r.nsp=t.substring(n,e)}else r.nsp="/";const i=t.charAt(e+1);if(""!==i&&Number(i)==i){const n=e+1;for(;++e;){const n=t.charAt(e);if(null==n||Number(n)!=n){--e;break}if(e===t.length)break}r.id=Number(t.substring(n,e+1))}if(t.charAt(++e)){const n=function(t){try{return JSON.parse(t)}catch(t){return!1}}(t.substr(e));if(!o.isPayloadValid(r.type,n))throw new Error("invalid payload");r.data=n}return n("decoded %s as %j",t,r),r}static isPayloadValid(t,e){switch(t){case s.CONNECT:return"object"==typeof e;case s.DISCONNECT:return void 0===e;case s.CONNECT_ERROR:return"string"==typeof e||"object"==typeof e;case s.EVENT:case s.BINARY_EVENT:return Array.isArray(e)&&e.length>0;case s.ACK:case s.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}e.Decoder=o;class r{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const t=fn.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}})),gn=Lt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.on=void 0,e.on=function(t,e,n){return t.on(e,n),function(){t.off(e,n)}}})),yn=Lt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Socket=void 0;const n=Zt("socket.io-client:socket"),s=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});e.Socket=class extends ke{constructor(t,e,n){super(),this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},n&&n.auth&&(this.auth=n.auth),this.io._autoConnect&&this.open()}subEvents(){if(this.subs)return;const t=this.io;this.subs=[gn.on(t,"open",this.onopen.bind(this)),gn.on(t,"packet",this.onpacket.bind(this)),gn.on(t,"error",this.onerror.bind(this)),gn.on(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){if(s.hasOwnProperty(t))throw new Error('"'+t+'" is a reserved event name');e.unshift(t);const o={type:mn.PacketType.EVENT,data:e,options:{}};o.options.compress=!1!==this.flags.compress,"function"==typeof e[e.length-1]&&(n("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),o.id=this.ids++);const r=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!r||!this.connected)?n("discard packet as the transport is not currently writable"):this.connected?this.packet(o):this.sendBuffer.push(o),this.flags={},this}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){n("transport is open - connecting"),"function"==typeof this.auth?this.auth((t=>{this.packet({type:mn.PacketType.CONNECT,data:t})})):this.packet({type:mn.PacketType.CONNECT,data:this.auth})}onerror(t){this.connected||super.emit("connect_error",t)}onclose(t){n("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,super.emit("disconnect",t)}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case mn.PacketType.CONNECT:if(t.data&&t.data.sid){const e=t.data.sid;this.onconnect(e)}else super.emit("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case mn.PacketType.EVENT:case mn.PacketType.BINARY_EVENT:this.onevent(t);break;case mn.PacketType.ACK:case mn.PacketType.BINARY_ACK:this.onack(t);break;case mn.PacketType.DISCONNECT:this.ondisconnect();break;case mn.PacketType.CONNECT_ERROR:const e=new Error(t.data.message);e.data=t.data.data,super.emit("connect_error",e)}}onevent(t){const e=t.data||[];n("emitting event %j",e),null!=t.id&&(n("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const n of e)n.apply(this,t)}super.emit.apply(this,t)}ack(t){const e=this;let s=!1;return function(...o){s||(s=!0,n("sending ack %j",o),e.packet({type:mn.PacketType.ACK,id:t,data:o}))}}onack(t){const e=this.acks[t.id];"function"==typeof e?(n("calling ack %s with %j",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):n("bad ack %s",t.id)}onconnect(t){n("socket connected with id %s",t),this.id=t,this.connected=!0,this.disconnected=!1,super.emit("connect"),this.emitBuffered()}emitBuffered(){this.receiveBuffer.forEach((t=>this.emitEvent(t))),this.receiveBuffer=[],this.sendBuffer.forEach((t=>this.packet(t))),this.sendBuffer=[]}ondisconnect(){n("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((t=>t())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&(n("performing disconnect (%s)",this.nsp),this.packet({type:mn.PacketType.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const e=this._anyListeners;for(let n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}}})),bn=wn;function wn(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}wn.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-n:t+n}return 0|Math.min(t,this.max)},wn.prototype.reset=function(){this.attempts=0},wn.prototype.setMin=function(t){this.ms=t},wn.prototype.setMax=function(t){this.max=t},wn.prototype.setJitter=function(t){this.jitter=t};var kn=Lt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Manager=void 0;const n=Zt("socket.io-client:manager");e.Manager=class extends ke{constructor(t,e){super(),this.nsps={},this.subs=[],t&&"object"==typeof t&&(e=t,t=void 0),(e=e||{}).path=e.path||"/socket.io",this.opts=e,this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new bn({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this._readyState="closed",this.uri=t;const n=e.parser||mn;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=!1!==e.autoConnect,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return void 0===t?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return void 0===t?this._reconnectionDelay:(this._reconnectionDelay=t,null===(e=this.backoff)||void 0===e||e.setMin(t),this)}randomizationFactor(t){var e;return void 0===t?this._randomizationFactor:(this._randomizationFactor=t,null===(e=this.backoff)||void 0===e||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return void 0===t?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,null===(e=this.backoff)||void 0===e||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(t){if(n("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;n("opening %s",this.uri),this.engine=cn(this.uri,this.opts);const e=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const o=gn.on(e,"open",(function(){s.onopen(),t&&t()})),r=gn.on(e,"error",(e=>{n("error"),s.cleanup(),s._readyState="closed",super.emit("error",e),t?t(e):s.maybeReconnectOnOpen()}));if(!1!==this._timeout){const t=this._timeout;n("connect attempt will timeout after %d",t),0===t&&o();const s=setTimeout((()=>{n("connect attempt timed out after %d",t),o(),e.close(),e.emit("error",new Error("timeout"))}),t);this.subs.push((function(){clearTimeout(s)}))}return this.subs.push(o),this.subs.push(r),this}connect(t){return this.open(t)}onopen(){n("open"),this.cleanup(),this._readyState="open",super.emit("open");const t=this.engine;this.subs.push(gn.on(t,"ping",this.onping.bind(this)),gn.on(t,"data",this.ondata.bind(this)),gn.on(t,"error",this.onerror.bind(this)),gn.on(t,"close",this.onclose.bind(this)),gn.on(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){super.emit("ping")}ondata(t){this.decoder.add(t)}ondecoded(t){super.emit("packet",t)}onerror(t){n("error",t),super.emit("error",t)}socket(t,e){let n=this.nsps[t];return n||(n=new yn.Socket(this,t,e),this.nsps[t]=n),n}_destroy(t){const e=Object.keys(this.nsps);for(const t of e){if(this.nsps[t].active)return void n("socket %s is still active, skipping close",t)}this._close()}_packet(t){n("writing packet %j",t);const e=this.encoder.encode(t);for(let n=0;n<e.length;n++)this.engine.write(e[n],t.options)}cleanup(){n("cleanup"),this.subs.forEach((t=>t())),this.subs.length=0,this.decoder.destroy()}_close(){n("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,"opening"===this._readyState&&this.cleanup(),this.backoff.reset(),this._readyState="closed",this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t){n("onclose"),this.cleanup(),this.backoff.reset(),this._readyState="closed",super.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)n("reconnect failed"),this.backoff.reset(),super.emit("reconnect_failed"),this._reconnecting=!1;else{const e=this.backoff.duration();n("will wait %dms before reconnect attempt",e),this._reconnecting=!0;const s=setTimeout((()=>{t.skipReconnect||(n("attempting reconnect"),super.emit("reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open((e=>{e?(n("reconnect attempt error"),t._reconnecting=!1,t.reconnect(),super.emit("reconnect_error",e)):(n("reconnect success"),t.onreconnect())})))}),e);this.subs.push((function(){clearTimeout(s)}))}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),super.emit("reconnect",t)}}})),vn=qt(Lt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Socket=e.io=e.Manager=e.protocol=void 0,Object.defineProperty(e,"Socket",{enumerable:!0,get:function(){return yn.Socket}});const n=Zt("socket.io-client");t.exports=e=o;const s=e.managers={};function o(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};const o=Qt.url(t,e.path),r=o.source,i=o.id,c=o.path,a=s[i]&&c in s[i].nsps;let u;return e.forceNew||e["force new connection"]||!1===e.multiplex||a?(n("ignoring socket cache for %s",r),u=new kn.Manager(r,e)):(s[i]||(n("new io instance for %s",r),s[i]=new kn.Manager(r,e)),u=s[i]),o.query&&!e.query&&(e.query=o.queryKey),u.socket(o.path,e)}e.io=o,Object.defineProperty(e,"protocol",{enumerable:!0,get:function(){return mn.protocol}}),e.connect=o;var r=kn;Object.defineProperty(e,"Manager",{enumerable:!0,get:function(){return r.Manager}})})));vn.Manager,window.socket=vn(),window.socket.on("connect",(()=>{window.idclient=window.socket.id,console.log("ID: "+window.idclient),window.socket.emit("requestnomi",{})}));return new class extends ht{constructor(t){super(),lt(this,t,null,Mt,c,{})}}({target:document.body,props:{name:"world"}})}();
